<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>The HYCOL color space</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">The HYCOL color space</h1>
</header>
<p>HYCOL is a color space I’ve designed which represents colors as
points in a hyperbolic geometry. Specifically, a color is represented by
its luma (aka luminance, or value), and chroma (aka chromaticity), and
chroma is understood as a point of the two-dimensional hyperbolic plane,
<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Cmathbb%7BH%7D%5E2"
alt="\mathbb{H}^2" title="\mathbb{H}^2" class="math inline" />, while
luma lies on a half-line. HYCOL is constructed to have, to reasonable
accuracy, the following useful properties:</p>
<ul>
<li><strong>Perceptual uniformity</strong>, meaning that the perceived
color difference, or perceived total variation in a gradient, should be
proportional to the geometric distance according to the metric.</li>
<li><strong>Perceived luminance and chromaticity constancy</strong>,
meaning that colors at the same luma should be perceived as equally
luminous, and colors at the same chroma at different lumas should be
perceived as roughly different shades of the same hue and
saturation.</li>
<li><strong>Simple and highly symmetric geometry</strong>, in our case
<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Cmathbb%7BH%7D%5E2"
alt="\mathbb{H}^2" title="\mathbb{H}^2" class="math inline" />, to
provide clear and efficiently computable geometric formulations of color
theory concepts.</li>
</ul>
<p>I want the enforcement of these principles to only really be realized
within the sRGB gamut and for LCD screens, which is a small subset of
the full gamut of physically realizable colors, and then also only
really within the range of variation in digital displays and viewing
conditions around the sRGB standard.</p>
<p>This colorspace is assembled by using several known insights from the
literature in combination. These sources are:</p>
<ol type="1">
<li>The <strong>1976 CIELAB color space</strong>, which is an early
attempt at a perceptually uniform Euclidean color space.</li>
<li><em>Cui, G., Luo, M.R., Rigg, B., Roesler, G. and Witt, K. (2002),
Uniform colour spaces based on the DIN99 colour-difference formula.
Color Res. Appl., 27: 282-290.</em>, where a set of CIELAB variations,
<strong>DIN99x</strong>, are presented, which improve on CIELAB’s luma
uniformity and problematic hue shifts in the blue region.</li>
<li><em>Ivar Farup, “Hyperbolic geometry for colour metrics,” Opt.
Express 22, 12369-12378 (2014),</em> which evidences how the phenomenon
of hue superimportance can be properly addressed by converting the
chroma part of standard color spaces into a hyperbolic plane;
identifying the best match to the data in <strong>DIN99c</strong> with a
specific hyperbolic radius.</li>
<li><em>Fairchild, M.D. and Pirrotta, E. (1991), Predicting the
lightness of chromatic object colors using CIELAB. Color Res. Appl., 16:
385-393.</em>, which propose a functioning model for the strength of the
<strong>Helmholtz-Kohlrausch effect</strong>.</li>
</ol>
<p>It’s well known that color spaces based on addition of three
primaries, like forms of RGB (the difference with sRGB is immaterial for
the present discussion), are highly non-uniform and unsuitable for our
purposes. CIELAB, CIELUV, CIECAM02, etc. and similar do improve
considerably on these aspect as best as possible while mantaining a
Euclidean metric. However, they do not account correctly for two
phenomena that I think are very important for color perception in
digital art: <strong>hue superimportance</strong> and the
<strong>Helmholtz-Kohlrausch effect</strong>. In addition, the
inaccuracy of the metric has further negative implications in the
colorspace’s ability to perform blending and illumination changes in a
way that matches up with the expectation of an artist and a consumer of
art.</p>
<h3 id="hue-superimportance">Hue Superimportance</h3>
<p>Hue superimportance is the observation that for saturated colors
variations in hue produce a perceived variation which is greater than
expected. We can make this more precise. In the wheel below, the spokes
are all of equal length, in the sense that from grey up to the rim of
the wheel we perceive roughly the same total variation as the color
saturates. This total variation is the radius <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20R" alt="R"
title="R" class="math inline" /> of the wheel.</p>
<p><img src="assets/wheel_euclidean.png" /></p>
<p>If Euclidean geometry applied, then, the circumference itself should
have a length <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%202%5Cpi%20R"
alt="2\pi R" title="2\pi R" class="math inline" />, and we should
perceive colors to be varying around at the same speed as in the spokes,
because the literal length of the Euclidean circle on our hopefully flat
screen is supposedly proportional to that variation. Instead, if you pay
close attention, you’ll see that the change is quite a bit faster,
almost twice as fast. We could draw a more accurate wheel like this:</p>
<p><img src="assets/wheel_wavy.png" /></p>
<p>This fact, which is sometimes informally stated as “there are more
than 360° worth of hue at high saturation”, implies that the geometry of
the chroma plane is not flat, and since it’s always a super-importance
and never a sub-importance, it must have negative curvature.</p>
<h3 id="helmholtz-kohlrausch-effect">Helmholtz-Kohlrausch effect</h3>
<p>The HK effect is an odd perceptual phenomenon where certain very
saturated colors appear brighter than they actually are. For example,
the following colours in each image have all the same CIELAB luminance,
which is the same as the grey in the background:</p>
<p><img src="assets/hk_15.png" /> <img src="assets/hk_30.png" /> <img
src="assets/hk_50.png" /> <img src="assets/hk_70.png" /></p>
<p>Most existing colorspaces choose not to account for the HK effect, as
it can be unreliable, has psychological components, and is most
importantly dependent on the quality of the observed surface.</p>
<p>Some saturated colors look very luminous and “pop” off the
background, even though they are at the same brightness in physiological
terms. The HK effect is strong and consistent for digital displays, and
I found it necessary to take into account since it affects greatly the
perception of values, whose control is fundamental for illustration.
Failure to account for HK can result in less legible designs. It is
somewhat less relevant for traditional paints, in part because they can
often not achieve the same degree of purity (saturation) as some corners
of additive RGB, and in part because the surface quality of paint is
distinct from an LCD screen.</p>
<p>The HK effect increases with saturation, and it is stronger for
darker luminances (an already bright color is brightened less). Its
dependence on hue is very complicated and the subject of several
studies, but generally it’s accepted that it’s always positive -
saturation can never make a color look brighter than it objectively is,
and that it’s most intense on blues, rather intense on magentas all the
way to reds, and has a narrow dip in strength around yellow, being
mostly non-existent for yellow hues.</p>
<h2 id="details-of-the-mapping">Details of the Mapping</h2>
<h3 id="chroma-to-din99c">Chroma to DIN99c</h3>
<p>Let a colour be expressed in CIELAB space as luma <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20L%5E%2A"
alt="L^*" title="L^*" class="math inline" /> and chromaticity <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20a%5E%2A%2Cb%5E%2A"
alt="a^*,b^*" title="a^*,b^*" class="math inline" />.</p>
<p>First, we convert chroma to the H99 space:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Ctilde%7Bb%7D%20%3D%200.94%5Ccdot%20b%5E%2A"
alt="\tilde{b} = 0.94\cdot b^*" title="\tilde{b} = 0.94\cdot b^*"
class="math display" /></p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20C_%7B%5Cmathrm%7B99c%7D%7D%20%3D%2023%20%5Cln%5Cleft%281%2B0.066%20%5Csqrt%7B%28a%5E%2A%29%5E2%20%2B%20%5Ctilde%7Bb%7D%5E2%7D%5Cright%29"
alt="C_{\mathrm{99c}} = 23 \ln\left(1+0.066 \sqrt{(a^*)^2 + \tilde{b}^2}\right)"
title="C_{\mathrm{99c}} = 23 \ln\left(1+0.066 \sqrt{(a^*)^2 + \tilde{b}^2}\right)"
class="math display" /></p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20h_%7B%5Cmathrm%7B99c%7D%7D%20%3D%20%5Coperatorname%7Batan2%7D%28%5Ctilde%7Bb%7D%2Fa%5E%2A%29"
alt="h_{\mathrm{99c}} = \operatorname{atan2}(\tilde{b}/a^*)"
title="h_{\mathrm{99c}} = \operatorname{atan2}(\tilde{b}/a^*)"
class="math display" /></p>
<h3 id="helmholtz-kohlrausch-correction">Helmholtz-Kohlrausch
Correction</h3>
<p>Then, we perform correction of luminance to account for the
Helmholtz-Kohlrausch effect, using the Pirrotta-Fairchild model. This is
performed in DIN99c chroma coordinates instead of CIELAB, with minimal
impact.</p>
<p>First we compute the strength of the HK effect according to hue, with
the characteristic dip around yellow.</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20f_1%28h_%5Cmathrm%7B99c%7D%29%20%3D%200.116%20%5Cleft%7C%5Csin%5Cleft%28%5Cfrac%7Bh_%5Cmathrm%7B99c%7D-90%C2%B0%7D%7B2%7D%20%5Cright%29%5Cright%7C%20%2B0.085"
alt="f_1(h_\mathrm{99c}) = 0.116 \left|\sin\left(\frac{h_\mathrm{99c}-90°}{2} \right)\right| +0.085"
title="f_1(h_\mathrm{99c}) = 0.116 \left|\sin\left(\frac{h_\mathrm{99c}-90°}{2} \right)\right| +0.085"
class="math display" /></p>
<p>Then we have the corrected luma:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20L%5E%7B%2A%2A%7D%20%3D%20L%5E%2A%20%2B%20%5Cmu%20-%20%5Cnu%20L%5E%2A%5C%2C%2C%5Cquad%20%5Cmu%20%3D%202.5%5C%2Cf_1%20C_%7B%5Cmathrm%7B99c%7D%7D%5C%2C%2C%5Cquad%20%5Cnu%20%3D%200.025%20f_1%20C_%7B%5Cmathrm%7B99c%7D%7D"
alt="L^{**} = L^* + \mu - \nu L^*\,,\quad \mu = 2.5\,f_1 C_{\mathrm{99c}}\,,\quad \nu = 0.025 f_1 C_{\mathrm{99c}}"
title="L^{**} = L^* + \mu - \nu L^*\,,\quad \mu = 2.5\,f_1 C_{\mathrm{99c}}\,,\quad \nu = 0.025 f_1 C_{\mathrm{99c}}"
class="math display" /></p>
<h3 id="luma-to-din99c">Luma to DIN99c</h3>
<p>Finally, we perform the conversion to DIN99c luma, but employing the
HK-corrected luma as input.</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20l%20%3D%20l_%7B%5Cmathrm%7B99c%7D%7D%20%3D%20317.65%20%5Cln%281%2B0.0037%20L%5E%7B%2A%2A%7D%29"
alt="l = l_{\mathrm{99c}} = 317.65 \ln(1+0.0037 L^{**})"
title="l = l_{\mathrm{99c}} = 317.65 \ln(1+0.0037 L^{**})"
class="math display" /></p>
<p>At this point, we have <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%28l%2CC_%7B%5Cmathrm%7B99c%7D%7D%2Ch_%7B%5Cmathrm%7B99c%7D%7D%29"
alt="(l,C_{\mathrm{99c}},h_{\mathrm{99c}})"
title="(l,C_{\mathrm{99c}},h_{\mathrm{99c}})" class="math inline" />
polar DIN99c coordinates with HK-effect correction.</p>
<h3 id="hyperbolicization">Hyperbolicization</h3>
<p>We then perform “hyperbolicization” by interpreting <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20C_%7B%5Cmathrm%7B99c%7D%7D"
alt="C_{\mathrm{99c}}" title="C_{\mathrm{99c}}" class="math inline" />
as a geodesic radius in the hyperbolic plane:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Crho%20%3D%20C_%7B%5Cmathrm%7B99c%7D%7D%20%2F%20R"
alt="\rho = C_{\mathrm{99c}} / R" title="\rho = C_{\mathrm{99c}} / R"
class="math display" /></p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20R%20%3D%2028.6"
alt="R = 28.6" title="R = 28.6" class="math inline" /> is the radius of
curvature of the chromaticity plane in units of DIN99c chromaticity, and
thus <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Crho"
alt="\rho" title="\rho" class="math inline" /> is the geodesic distance
of the colour from the pure grey (D65) of the same luminance. Therefore,
finally:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w_0%20%3D%20%5Ctanh%5Cleft%28%5Cfrac%7B%5Crho%7D%7B2%7D%5Cright%29%20e%5E%7Bi%28h_%7B%5Cmathrm%7B99c%7D%7D%20%2B%20%5Ctheta_T%29%7D"
alt="w_0 = \tanh\left(\frac{\rho}{2}\right) e^{i(h_{\mathrm{99c}} + \theta_T)}"
title="w_0 = \tanh\left(\frac{\rho}{2}\right) e^{i(h_{\mathrm{99c}} + \theta_T)}"
class="math display" /></p>
<p>where the thermal angle <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Ctheta_T%20%3D%2040%C2%B0"
alt="\theta_T = 40°" title="\theta_T = 40°" class="math inline" /> is
such that the warmest hue (an orange-ish red) is along the positive real
axis.</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w_0"
alt="w_0" title="w_0" class="math display" /> lies in the disk <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cvert%20w_0%5Cvert%20%3C%201"
alt="\vert w_0\vert &lt; 1" title="\vert w_0\vert &lt; 1"
class="math display" /> and represents a point in the Poincaré disk
model of the hyperbolic plane. The colour space thus defined through
<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%28l%2Cw%29"
alt="(l,w)" title="(l,w)" class="math display" /> with the colour
distance geometry <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cmathbb%7BR%7D%5E%2B%5Ctimes%20%5Cmathbb%7BH%7D%5E2"
alt="\mathbb{R}^+\times \mathbb{H}^2"
title="\mathbb{R}^+\times \mathbb{H}^2" class="math display" />, or
precisely</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20dE%5E2%20%3D%20dl%5E2%20%2B%20R%5E2%5Cleft%28%5Cfrac%7B4%7Cdw_0%7C%5E2%7D%7B%281-%7Cw_0%7C%5E2%29%5E2%7D%20%5Cright%29"
alt="dE^2 = dl^2 + R^2\left(\frac{4|dw_0|^2}{(1-|w_0|^2)^2} \right)"
title="dE^2 = dl^2 + R^2\left(\frac{4|dw_0|^2}{(1-|w_0|^2)^2} \right)"
class="math display" /></p>
<p>is hypothesized to be perceptually uniform.</p>
<!-- ### Whitepoint temperature shift

The space is highly symmetric which makes the whitepoint arbitrary. For colours on the real axis $w_0 \in \mathbb{R}$, the temperature is $T = 2 \tanh^{-1}(w_0)$ (later we will extend the definition to all colours). We perform a shift to a warmer whitepoint as such:

$$w = \frac{\ch{\frac{T}{2}}w_0 - \sh{\frac{T}{2}}}{-\sh{\frac{T}{2}}w_0 + \ch{\frac{T}{2}}}$$

with the temperature of the warm whitepoint $N_W$ set to $T_W = 0.25$. This is an isometry, so $w$ also sees the same metric as $$w_0$$. -->
<h2 id="summary-and-gamuts">Summary and Gamuts</h2>
<p>The final <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%28l%2Cw%29"
alt="(l,w)" title="(l,w)" class="math display" /> tuple constitute our
hyperbolic model of colours. Only a small fraction of the domain is
actually occupied by a given gamut. Our interest is specifically in the
sRGB gamut. We assume the standard sRGB primary specifications and the
D65 whitepoint for conversion sRGB -&gt; CIEXYZ -&gt; CIELAB.</p>
<p>The range of <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20l" alt="l"
title="l" class="math display" /> is from 0 (sRGB black) to 100 (sRGB
white). <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w" alt="w"
title="w" class="math display" /> lies in the unit disk, but in practice
for reasonable whitepoints most of the gamut is within <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cvert%20w%5Cvert%3C0.75"
alt="\vert w\vert&lt;0.75" title="\vert w\vert&lt;0.75"
class="math display" />. At fixed <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20l" alt="l"
title="l" class="math display" /> we have a notion of <em>slice
gamut</em>, which is always contained in the <strong>full
gamut</strong>, which is the region in <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cmathbb%7BH%7D%5E2"
alt="\mathbb{H}^2" title="\mathbb{H}^2" class="math display" /> of all
possible values of <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w" alt="w"
title="w" class="math display" /> for colours in the sRGB gamut.</p>
<p>In the diagram, a few slice gamuts are displayed in the Poincaré disk
model of chroma space, bounded by the outline of the full gamut.</p>
<p><img src="assets/gamuts.png" /></p>
<p>The full gamut is the shape, vaguely circular, outlined by six smooth
segments. This boundary is the image of the hexagon of the sRGB
primaries and secundaries in the order red -&gt; yellow -&gt; green
-&gt; cyan -&gt; blue -&gt; magenta -&gt; red. The images of these
segments are not themselves straight segments, and do bulge out
considerably.</p>
<p>It would be misleading to display the <em>interior</em> of the full
gamut all at once on the same plane, because no single value of luma
covers it all simultaneously, and variation in luminance will affect
colour difference and thus deform the metric.</p>
<h2 id="inverse-transformation">Inverse transformation</h2>
<p>The transformation CIELAB -&gt; hyperbolic model is composed of
individually invertible elements. Schematically, starting from a
hyperbolic colour in the warm frame:</p>
<ul>
<li>The radial distance is “de-hyperbolicized” and thermal angle removed
to recover DIN99c chroma.</li>
<li>HK-corrected luma is recovered from DIN99c by inverting the
mapping.</li>
<li>Uncorrected CIELAB luma is recovered by inverting the (linear)
HK-correction.</li>
<li>DIN99c chroma is easily mapped back to CIELAB chroma</li>
</ul>
<h1 id="temperature-and-reference-frames">Temperature and Reference
Frames</h1>
<h3 id="horocyclic-temperature">Horocyclic Temperature</h3>
<p>I propose a notion of colour temperature alternative to the
traditional one based on the Planckian locus and more aligned with the
subjective impression of “warmth”. Temperature of individual colours,
not merely lights, is artistically relevant. Warmer colours are
perceived to be closer, moving outside the screen towards the viewer,
and more abstractly have a quality of “intimacy”; conversely, cooler
colours recede.</p>
<!-- As already said, the $w = t \in \mathbb{R}$ axis of neutrals has a natural and intuitive notion of warmth, which is signed distance alongside it from a reference white $N_0$, and thus $T_{w_0} = 2 \th^{-1}(t)$. This temperature is in completely different units and interpretation than physical temperature of a black body, spanning on the neutral axis from $T = -1.07$ (noon sky) through $T = 0.0$ at true white $N_0$ into $T=1.62$ (glowing orangeish red). Note that warmer and cooler colours than these extremes exist off-axis. -->
<p>The first assumption that I make is that temperature only depends on
chroma, not luma (if both are properly constructed). This means that the
isotherms, the sets of colors of equal temperature, are curves in the
hyperbolic chroma plane. What kind of curves? It would be preferable for
them to be a more symmetric and simple family of curves, or at least be
approximately described as such.</p>
<p>Let’s begin by identifying the “warmest hue”, which must be properly
defined to hold at any given saturation. We observe that such warmest
hue is very clearly perceived to be an orangeish-red, or
<strong>vermillion</strong>. Blood red and carrot on either side, at
equal saturation, are sharply seen to be colder. Consider the hyperbolic
line from D65 white to vermillion, extended backwards as well into sky
blue. We’ll call this the <strong>thermal axis</strong>, and HYCOL has
been defined so that this is conveniently just the horizontal line of
<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w%20%5Cin%20%5Cmathbb%7BR%7D"
alt="w \in \mathbb{R}" title="w \in \mathbb{R}" class="math display" />.
It would be reasonable to define the temperature for colors on the
thermal axis as the signed distance from white, and in fact we’ll see in
a bit that this is sound. If we do, then translations along the thermal
axis are just simply shifts in temperature.</p>
<p>Then isotherms must meet the thermal axis at right angle, and their
temperature is that of the point of intersection. If they are
sufficiently symmetric, so curves of constant curvature, then they are a
pencil of generalized circles orthogonal to the thermal axis; namely,
they could be any of these:</p>
<ul>
<li>Straight lines</li>
<li>Hypercycles</li>
</ul>
<p><em>wip</em></p>
<p><img src="assets/isotherm_strips.png" /></p>
<h1 id="triangular-blending-and-fields">Triangular Blending and
Fields</h1>
<p><em>wip: rewrite for pandoc markdown</em></p>
<p>The fundamental object that the theory is based on is the
<strong>geodesic gradient</strong>, which is the “optimal” interpolation
between two colours (the vertices), in the sense that it involves the
least possible perceived total colour variation and that such perceived
change occurs at constant speed. This is geometrically the geodesic
segment between two points, which is the shortest path and, by
necessity, of curvature zero.</p>
<p>When a geodesic gradient stretches between two vertices with
different luminance, the luminance changes at the same rate that the
chromaticity does, relative to the total. For example, when we are <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%201%2F3"
alt="1/3" title="1/3" class="math inline" /> of the way through from
<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20A" alt="A"
title="A" class="math inline" /> to <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20B" alt="B"
title="B" class="math inline" />, or equivalently we are performing a
blend of <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20A" alt="A"
title="A" class="math inline" /> and <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20B" alt="B"
title="B" class="math inline" /> with weights <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%202%2F3"
alt="2/3" title="2/3" class="math inline" /> and <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%201%2F3"
alt="1/3" title="1/3" class="math inline" /> respectively, the luminance
will be <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20l_%5Cmathrm%7Bblend%7D%20%3D%20%5Cfrac%7B2%7D%7B3%7D%20l_A%20%2B%20%5Cfrac%7B1%7D%7B3%7Dl_B"
alt="l_\mathrm{blend} = \frac{2}{3} l_A + \frac{1}{3}l_B"
title="l_\mathrm{blend} = \frac{2}{3} l_A + \frac{1}{3}l_B"
class="math inline" />, <em>and</em> the chromaticity will be at a
distance along the path in the same proportion: <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20d%28w_A%2Cw_%5Cmathrm%7Bblend%7D%29%20%3D%20%5Cfrac%7B1%7D%7B2%7D%20d%28w_B%2Cw_%5Cmathrm%7Bblend%7D%29"
alt="d(w_A,w_\mathrm{blend}) = \frac{1}{2} d(w_B,w_\mathrm{blend})"
title="d(w_A,w_\mathrm{blend}) = \frac{1}{2} d(w_B,w_\mathrm{blend})"
class="math inline" />. This follows from the fact that the colour
metric is a product metric, and defines uniquely the geodesic gradient
between any two colours, or equivalently the weighted blend between two
colours <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20A" alt="A"
title="A" class="math inline" />,<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20B" alt="B"
title="B" class="math inline" /> with weights <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Clambda_A%2C%5Clambda_B"
alt="\lambda_A,\lambda_B" title="\lambda_A,\lambda_B"
class="math inline" /> such that <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Clambda_A%2B%5Clambda_B%3D1"
alt="\lambda_A+\lambda_B=1" title="\lambda_A+\lambda_B=1"
class="math inline" />.</p>
<p>For the computational aspect, there is a closed form expression for
such an interpolation as the hyperbolic equivalent of the SLERP
operation for spherical geometry, sometimes called HLERP. However this
is of limited use, since the generalization to a weighted blend of more
than two colours, which we do require extensively, has no closed form
solution anyway.</p>
<p>We are interested in blending several colours <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20C_1%2C%20C_2%2C%5Cldots%2C%20C_n"
alt="C_1, C_2,\ldots, C_n" title="C_1, C_2,\ldots, C_n"
class="math inline" /> with weights <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Clambda_1%2C%5Cldots%2C%20%5Clambda_n"
alt="\lambda_1,\ldots, \lambda_n" title="\lambda_1,\ldots, \lambda_n"
class="math inline" /> that sum to one: <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Csum_i%20%5Clambda_i%20%3D%201"
alt="\sum_i \lambda_i = 1" title="\sum_i \lambda_i = 1"
class="math inline" />. (We will only need <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20n%3D3"
alt="n=3" title="n=3" class="math inline" />, where HLERP is barycentric
coordinates over a triangle, but no simplification is offered compared
to the general case). Of course, we will blend lumas <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20l_i" alt="l_i"
title="l_i" class="math inline" /> and chromas <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w_i" alt="w_i"
title="w_i" class="math inline" /> separately with the same weights. For
lumas, we just perform a regular linear interpolation. For hyperbolic
chromas, defining a canonical weighted average in an arbitrary space is
generally impossible, but there is a consistent way to do so for <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Cmathbb%7BH%7D%5E2"
alt="\mathbb{H}^2" title="\mathbb{H}^2" class="math inline" /> points
due to its high degree of symmetry.</p>
<p>We impose the requirement that the n-fold HLERP reduces to the
two-point geodesic HLERP when all the weights but two vanish:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Coperatorname%7BHLERP%7D%28w_1%2C%5Clambda%3Bw_2%2C1-%5Clambda%3Bw_3%2C0%3Bw_4%2C0%2C%5Cldots%29%20%3D%20%5Coperatorname%7BHLERP%7D%28w_1%2C%5Clambda%3Bw_2%2C%5Clambda-1%29"
alt="\operatorname{HLERP}(w_1,\lambda;w_2,1-\lambda;w_3,0;w_4,0,\ldots) = \operatorname{HLERP}(w_1,\lambda;w_2,\lambda-1)"
title="\operatorname{HLERP}(w_1,\lambda;w_2,1-\lambda;w_3,0;w_4,0,\ldots) = \operatorname{HLERP}(w_1,\lambda;w_2,\lambda-1)"
class="math display" /></p>
<p>for triangles, for examples, this means that blends where one vertex
has weight zero reduce to the blend between the remaining two
vertices.</p>
<p>The following definition successfully generalizes the Euclidean lerp
to both spherical and hyperbolic geometry. The weighted average <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Coverline%7Bw%7D%20%3D%20%5Cbigoplus_i%20%5Clambda_i%20w_i"
alt="\overline{w} = \bigoplus_i \lambda_i w_i"
title="\overline{w} = \bigoplus_i \lambda_i w_i" class="math inline" />
is the unique point that minimizes the objective function:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20J%28w%29%20%3D%20%5Cfrac%7B1%7D%7B2%7D%5Csum_i%20%5Clambda_i%20%5C%2Cd%28w%2Cw_i%29%5E2"
alt="J(w) = \frac{1}{2}\sum_i \lambda_i \,d(w,w_i)^2"
title="J(w) = \frac{1}{2}\sum_i \lambda_i \,d(w,w_i)^2"
class="math display" /></p>
<p>This optimization must be performed numerically for <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20n%3E2"
alt="n&gt;2" title="n&gt;2" class="math inline" />. We employ a version
of gradient descent, though care should be applied to understand the
nature of this gradient as a mathematical object. First, let’s notate by
<img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20M%28q%29"
alt="M(q)" title="M(q)" class="math inline" /> the Moebius
transformation that sends <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%200" alt="0"
title="0" class="math inline" /> to <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20q" alt="q"
title="q" class="math inline" /> translating along the geodesic segment
from <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%200" alt="0"
title="0" class="math inline" /> to <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20q" alt="q"
title="q" class="math inline" />, which is explicitly</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20M%28q%29%20%3D%20%5Cfrac%7B1%7D%7B%5Csqrt%7B1-%7Cq%7C%5E2%7D%7D%5Cbegin%7Bpmatrix%7D1%20%26%20q%20%5C%5C%5Coverline%7Bq%7D%20%26%201%5Cend%7Bpmatrix%7D"
alt="M(q) = \frac{1}{\sqrt{1-|q|^2}}\begin{pmatrix}1 &amp; q \\\overline{q} &amp; 1\end{pmatrix}"
title="M(q) = \frac{1}{\sqrt{1-|q|^2}}\begin{pmatrix}1 &amp; q \\\overline{q} &amp; 1\end{pmatrix}"
class="math display" /></p>
<p>This matrix embodies the notion of translating in the direction and
distance of <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20q" alt="q"
title="q" class="math inline" /> “in the simplest way possible”,
considering the difficulty of being unable to compare directions at
different points.</p>
<p>We can then define the positions of the vertices relative to <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> by performing the inverse
transformation:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20r_i%20%3D%20M%28-w%29%20%5Ccdot%20w_i"
alt="r_i = M(-w) \cdot w_i" title="r_i = M(-w) \cdot w_i"
class="math display" /></p>
<p>Of course, <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20d%28r_i%2C0%29%3Dd%28w_i%2Cw%29"
alt="d(r_i,0)=d(w_i,w)" title="d(r_i,0)=d(w_i,w)"
class="math inline" />. Then, we can define the “logarithm” of such
relative position as a complex number with the same phase and norm equal
to the distance:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Clog%5Br_i%5D%20%3D%20%5Clog%20%5Cleft%5B%7Cr_i%7Ce%5E%7Bi%5Cphi_i%7D%5Cright%5D%20%3D%20d%28r_i%2C0%29%20e%5E%7Bi%5Cphi_i%7D"
alt="\log[r_i] = \log \left[|r_i|e^{i\phi_i}\right] = d(r_i,0) e^{i\phi_i}"
title="\log[r_i] = \log \left[|r_i|e^{i\phi_i}\right] = d(r_i,0) e^{i\phi_i}"
class="math display" /></p>
<p>The logarithm is a tangent vector which belongs to the tangent space
to <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Cmathbb%7BH%7D%5E2"
alt="\mathbb{H}^2" title="\mathbb{H}^2" class="math inline" /> at the
origin, which is just <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Cmathbb%7BC%7D"
alt="\mathbb{C}" title="\mathbb{C}" class="math inline" />, a vector
space where weighted averages are well defined. The gradient is
recognized to be</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cnabla%20J%28w%29%20%3D%20-%20%5Csum_i%20%5Clambda_i%20%5Clog%5Br_i%5D"
alt="\nabla J(w) = - \sum_i \lambda_i \log[r_i]"
title="\nabla J(w) = - \sum_i \lambda_i \log[r_i]"
class="math display" /></p>
<p>To perform a gradient descent iteration, we need to properly
generalize the operation of (small) displacement <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w%20%5Cmapsto%20w%20-%5Cnabla%20J%28w%29"
alt="w \mapsto w -\nabla J(w)" title="w \mapsto w -\nabla J(w)"
class="math inline" />. We understand we really need to transform <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> by the exponential of the tangent
vector <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20-%5Cnabla%20J"
alt="-\nabla J" title="-\nabla J" class="math inline" />. We define the
“exponential” to invert the “logarithm”:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cexp%5B%7Cv%7Ce%5E%7Bi%5Cphi%7D%5D%20%3D%20%5Cth%5Cleft%28%5Cfrac%7B%7Cv%7C%7D%7B2%7D%5Cright%29e%5E%7Bi%5Cphi%7D"
alt="\exp[|v|e^{i\phi}] = \th\left(\frac{|v|}{2}\right)e^{i\phi}"
title="\exp[|v|e^{i\phi}] = \th\left(\frac{|v|}{2}\right)e^{i\phi}"
class="math display" /></p>
<p>And finally the iteration step is as follows:</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w%20%5Cmapsto%20M%28%5Cexp%5B-%5Cnabla%20J%28w%29%5D%29%20%5Ccdot%20w"
alt="w \mapsto M(\exp[-\nabla J(w)]) \cdot w"
title="w \mapsto M(\exp[-\nabla J(w)]) \cdot w"
class="math display" /></p>
<p>We employ the following algorithm with linear convergence, described
directly in the Poincaré disk for convenience:</p>
<ul>
<li>Set <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> to a first guess, e.g. <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Csum_i%20%5Clambda_i%20w_i"
alt="\sum_i \lambda_i w_i" title="\sum_i \lambda_i w_i"
class="math inline" />.</li>
<li>Start loop:</li>
<li><ul>
<li>Find vertices relative to <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> as <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20r_i%20%3D%20M%28-w%29%5Ccdot%20w_i"
alt="r_i = M(-w)\cdot w_i" title="r_i = M(-w)\cdot w_i"
class="math inline" />.</li>
</ul></li>
<li><ul>
<li>Compute gradient as <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Cnabla%20J%28w%29%20%3D%20-%20%5Csum_i%20%5Clambda_i%20%5Clog%5Br_i%5D"
alt="\nabla J(w) = - \sum_i \lambda_i \log[r_i]"
title="\nabla J(w) = - \sum_i \lambda_i \log[r_i]"
class="math inline" /></li>
</ul></li>
<li><ul>
<li>Compute <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20u%20%3D%20%5Cexp%5B-%5Cnabla%20J%5D"
alt="u = \exp[-\nabla J]" title="u = \exp[-\nabla J]"
class="math inline" />. This is the next step position, but relative to
current <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" />.</li>
</ul></li>
<li><ul>
<li>Translate <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> by <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20u" alt="u"
title="u" class="math inline" /> through <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w%20%5Cmapsto%20M%28u%29%20w"
alt="w \mapsto M(u) w" title="w \mapsto M(u) w"
class="math inline" /></li>
</ul></li>
<li><ul>
<li>If <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%7Cu%7C%3C%5Cepsilon"
alt="|u|&lt;\epsilon" title="|u|&lt;\epsilon" class="math inline" />,
break and return <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> as <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5Coverline%20w"
alt="\overline w" title="\overline w" class="math inline" />.</li>
</ul></li>
</ul>
<h1 id="color-harmony">Color Harmony</h1>
<h2 id="complementarity-and-skin-frame">Complementarity and Skin
Frame</h2>
<p>Complementary colors is one of the most inconsistent and
contradictory topics in color theory. This is inclusive both of the
meaning, purpose and effect of complementary colors, and specifically of
which colors should be complementary with which.</p>
<p>I argue that this is in fact a manifestation of the notion of
complementarity being relative; this relativity fortuitously happens to
be in fact mathematically identical to special relativity in physics,
since the Lorentz group is the isometry group of the hyperbolic plane.
We speak of complementarity only with respect to a center, or
whitepoint, which in turn defines a <strong>reference frame</strong>.
Complementarity in one frame is distinct from that in another.</p>
<p>First of all, complementarity involves exclusively the chroma
component, and it is independent from the luma.</p>
<p>Two chromaticities are complementary in a given frame if the
(hyperbolic) straight segment between them passes through the center.
Equivalently, we can define <strong>hue</strong> as the angle from the
center, assuming the thermal axis from the center to the ideal warm
point as 0°, and then complementary colours have hues 180° apart. Hue is
frame dependent.</p>
<p>The D65 whitepoint, the “true” grey, defines a frame which is related
the physiology of human vision. Complementaries in this frame are
opponents of the opponent process theory. Afterimages of a certain color
are in its opponent complementary, for example in this well-known
illusion:</p>
<p><img src="assets/opponent_illusion.gif" /></p>
<p>Staring at the cross for enough time makes a green dot appear in the
moving vacancy - this is because green is the opponent complementary to
magenta, <em>because</em> they are collinear with the grey of the
background.</p>
<p>However, for art the opponent pairs are less useful. There is a
notion of complementarity, which we will call <strong>harmonic
complementarity</strong>, in which complementary colors are those that
clash and are perceived to be in a messy and repulsive relationship.
Harmonic complementaries are unclear in their intent, displeasing, and
have a characteristic sickly shimmer on their boundary. This impression
is worse at higher saturation, but it is in fact always present.</p>
<p>The prototypical clashing pair is red and green:
<i class="ctile-13"></i> <i class="ctile-6"></i>. Note that this is
different from the D65 frame, since the opponent complementary of red is
cyan, and for green is, as seen, magenta.</p>
<p>I have performed an experiment and acquired data to precisely
determine which pairs of colors are harmonic complementaries. If we draw
the segments between them, they <em>roughly</em> appear to be passing
through a single point:</p>
<p><img src="assets/complementarity_data.png" /></p>
<p>This harmonic center, which I’ve fixed at <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w%3D0.25%20%2B%200.1i"
alt="w=0.25 + 0.1i" title="w=0.25 + 0.1i" class="math display" /> is a
decidedly orange-ish chromaticity which happens to be, roughly, that of
human skin (of various ethnicities). It looks like this at various
lumas</p>
<p><img src="assets/skincenter.png" /></p>
<p>The significance of a match with skin tones is probably a rabbit hole
best left for spare afternoons. Still, we can term this the skin center,
defining a <strong>skin frame</strong>. For some reason, harmony is
relative to the skin frame. After transforming (“boosting”) to the skin
frame, the definition of hues and their spacing is completely different
from D65. These new, harmonic hues shrink the space dedicated to cool
colors and expand the accuracy on warm hues, due to the inherently warm
bias of the whitepoint.</p>
<p>In the skin frame, D65 itself is not neutral anymore, and it is
perceived to have a <strong>blue</strong> hue, with mild saturation.
This means that, as such, it really is harmonic complementary to orange,
and this is true at all luma. We can therefore conclude, somewhat
humorously but with reasonable motivation, that <strong>white is
complementary to orange</strong>, and they will indeed clash if the
alignment is correct.</p>
<h2 id="tone-system">14-tone system</h2>
<p>The division of the color wheel in the skin frame into a certain
number of equal spokes is completely arbitrary, and arguably unnecessary
since the geometric picture is available; nevertheless, having a
discrete structure will greatly improve practical use, even if there is
a small loss of generality. So far, the best choice I’ve found is to
divide hues into <strong>14 equal steps</strong>.</p>
<p>For the skin frame hues in the 14-tone system I’ve chosen the
following naming convention, using lowercase latin letters to avoid
confusion with pre-existing systems:</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td><i class="ctile-0">v</i></td>
<td>Vermillion</td>
<td>Warm, orange-ish red</td>
</tr>
<tr class="even">
<td><i class="ctile-1">c</i></td>
<td>Carrot</td>
<td>Reddish orange</td>
</tr>
<tr class="odd">
<td><i class="ctile-2">o</i></td>
<td>Orange</td>
<td>Orange fruit, cold orange</td>
</tr>
<tr class="even">
<td><i class="ctile-3">h</i></td>
<td>Honey</td>
<td>Warm, orange-ish yellow</td>
</tr>
<tr class="odd">
<td><i class="ctile-4">y</i></td>
<td>Yellow</td>
<td>Lemon, cold yellow</td>
</tr>
<tr class="even">
<td><i class="ctile-5">x</i></td>
<td>Chartreuse</td>
<td>Pear, yellow-green</td>
</tr>
<tr class="odd">
<td><i class="ctile-6">g</i></td>
<td>Green</td>
<td>Slightly cold green</td>
</tr>
<tr class="even">
<td><i class="ctile-7">t</i></td>
<td>Teal</td>
<td>Bluish green</td>
</tr>
<tr class="odd">
<td><i class="ctile-8">n</i></td>
<td>Noon</td>
<td>Noon sky, greenish blue</td>
</tr>
<tr class="even">
<td><i class="ctile-9">b</i></td>
<td>Blue</td>
<td>Late afternoon sky</td>
</tr>
<tr class="odd">
<td><i class="ctile-10">l</i></td>
<td>Lavender</td>
<td>Bluish violet</td>
</tr>
<tr class="even">
<td><i class="ctile-11">m</i></td>
<td>Magenta</td>
<td>Cold pinks</td>
</tr>
<tr class="odd">
<td><i class="ctile-12">p</i></td>
<td>Pink</td>
<td>Bordeaux, warm pinks, violet-ish red</td>
</tr>
<tr class="even">
<td><i class="ctile-13">r</i></td>
<td>Red</td>
<td>Blood red</td>
</tr>
</tbody>
</table>
<p>The diagram below depicts the extents of the sRGB gamut in the skin
frame with marked hue spokes, and the max-saturation colors of each hue.
(For this guide we will use more subdued representative tones since the
wild fluctuations in luma and saturation on the gamut boundary can be
confusing). Also marked, with greek letters, the RGB primaries and
secundaries, displaying misalignment with the new categories (e.g.,
primary red is decidedly warm).</p>
<p><img src="assets/skinframe_gamut.png" /></p>
<p>Observe that D65 greys, including full black and full white, are
exactly halfway between n and b, meaning their complementary axis is as
far as possible from o and c. This is convenient for digital art as it
allows the use of full black and white while minimizing the risk of
clashing with intermediate tones, if o and c are preferred.</p>
<h3 id="categorical-warp">Categorical Warp</h3>
<p><em>wip</em></p>
<h2 id="tone-intervals">14-Tone Intervals</h2>
<p>Harmonic coloring is based on two principles:</p>
<ol type="1">
<li>Complementary tones are maximally dissonant and should always be
avoided.</li>
<li>Contrast should be employed optimally to establish importance of
elements.</li>
</ol>
<p>These are forces in opposition: clearly complementary colors have the
greatest contrast, yet the best choice for a dichromatic piece is an
interval which is as large as possible without being dissonant. Since
complementaries are separated by 7 steps, this optimal choice is a
6-step interval we call a <strong>resonant</strong>. Every tone has two
resonants going clockwise or counter-clockwise. This is the 14 tones
connected by resonance; since 6 is even (and so is 14), resonances have
the same parity, thus there is an even cycle of resonants
<strong>voygnlp</strong> and an odd cycle <strong>chxtbmr</strong>,
analogous to the circle of fifths in music.</p>
<p><img src="assets/star.png" /></p>
<p>Working only with resonants is quite boring and static; some
variation in relationship between the hues can expand the emotional
range of a piece. While the contrast is lesser, an interval of 5 steps
is also quite pleasant, and it could be called a
<strong>semi-resonant</strong>. Here is all the possible intervals,
sorted by increasing dissonance, with my interpretation:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>N</th>
<th>Interval</th>
<th>Quality</th>
<th>Left</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>Unison</td>
<td>Complex (see below)</td>
<td><i class="ctile-13"></i> <i class="ctile-13"></i></td>
</tr>
<tr class="even">
<td>6</td>
<td>Resonant</td>
<td>Mutual emphasis: maximum contrast without complementarity</td>
<td><i class="ctile-13"></i> <i class="ctile-5"></i></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Semi-resonant</td>
<td>Similar to resonant, but with lesser contrast</td>
<td><i class="ctile-13"></i> <i class="ctile-4"></i></td>
</tr>
<tr class="even">
<td>3</td>
<td>Adjoint</td>
<td>Adjoint tones work together towards the same goal</td>
<td><i class="ctile-13"></i> <i class="ctile-2"></i></td>
</tr>
<tr class="odd">
<td>2</td>
<td>Major Analogous</td>
<td>Slightly dissonant: complementary of semi-resonant</td>
<td><i class="ctile-13"></i> <i class="ctile-1"></i></td>
</tr>
<tr class="even">
<td>4</td>
<td>Mediant</td>
<td>Odd and disorienting</td>
<td><i class="ctile-13"></i> <i class="ctile-3"></i></td>
</tr>
<tr class="odd">
<td>1</td>
<td>Minor Analogous</td>
<td>Dissonant: complementary of resonant</td>
<td><i class="ctile-13"></i> <i class="ctile-0"></i></td>
</tr>
<tr class="even">
<td>7</td>
<td>Complementary</td>
<td>Highly displeasing</td>
<td><i class="ctile-13"></i> <i class="ctile-6"></i></td>
</tr>
</tbody>
</table>
<p><img src="assets/combinatoric_modes.png" /></p>
<h3 id="axial-complementarity">Axial complementarity</h3>
<p><em>wip</em></p>
<h2 id="triads">Triads</h2>
<p>The simplest non-trivial palette structure is the triangular field
between three vertices, one of which is marked as the
<strong>key</strong>, and the other two for the <strong>base</strong>.
The key is the chromatic focal point of the piece and the purpose of the
triad is to emphasize the key by establishing a context in which it is
intensified by contrast.</p>
<p>The triad should be thought of as an arrow pointing to the key, it is
inherently a directed and dynamical structure. The motion is from base
to key, but also background to foreground, general to specific, and it
is the physical guided motion of the eye as it absorbs the piece.</p>
<p>A triad can certainly not have any complementaries among its
vertices. In addition, it should envelop the harmonic center, so the
base vertices should be on opposite sides of the complementary to the
key. Finally, since the key should be emphasized, the interval of the
base must be smaller than those from the base to the key. This only
leaves four possibilities:</p>
<p><img src="assets/triads.png" /></p>
<p>The key is positioned on the right, and I have further marked tones
that have been excluded due to complementarity.</p>
<p>The <strong>ultra-narrow</strong> triad is functional but has
undesirable properties: the base is dissonant and the range is small.
This palette is difficult to extend as further fields quickly drown out
the main one. In addition, the symmetry with respect to the key axis
makes it rather static.</p>
<p>The <strong>narrow</strong> triads are similar, but not identical, to
Fletcher’s. They are asymmetric and come in two chiral forms. The
intervals are varied and harmonious: a resonant, a semi-resonant, and an
adjoint. These palettes exhalt the key efficiently while also
incorporating a great degree of playful secondary motion. They provide
the range for rather surprising and dynamic artwork, and have the
greater potential to be extended. Generally narrow triads are the most
promising choice for main fields.</p>
<p><strong>Wide</strong> triads are unweildy. The primality of the key
is extremely weak (in fact, in the 12 tone system these are equilateral
triangles), the base interval is a mediant which is generally unpleasant
or uncertain in character, and finally there is symmetry. The range is
vast, but this is potentially at the detriment of the piece.</p>
<h3 id="tonnetz">Tonnetz</h3>
<p>Given what we know about harmony so far, the abstract color wheel
with analogous tones adjacent is not a particularly convenient
representation. We can lift a page from music theory again and construct
a two-dimensional lattice (tonnetz) where each edge represents a
particular consonant interval:</p>
<p><img src="assets/lattice.png" /></p>
<p>A portion of a Neo-Riemannian style lattice for the 14-tone system.
The lattice is periodic. Dotted lines represent adjoints, solid line are
resonants, and dashed lines are semi-resonants. Every triangle is a
narrow triad, and each tone is the key for the triads directly above and
below it.</p>
<p>For example, y is the bottom vertex of the narrow triad y/b/p, with y
as the key, p as the base resonant, and b as the semi-resonant. However,
it shares an edge with the narrow triad p/y/t, with now p as the key, y
as the base resonant, and t as the semi-resonant. Joined together, the
two triads assemble in a four-tone object including y,b,p and t, and
with the new interval b-t which is a major analogous.</p>
<p>The tonnetz also places at maximum distance colors which are
complementaries or mediants, providing a further rationalization of why
they’re perceived as displeasing – they are “distant” in terms of the
number of resonant steps that must be taken to bring one to the other.
In this picture (which is to be understood as more poetic than literal),
r and g are offending to the eye because the eye is invited to imagine,
for example, that the relationship of g to r is that g is resonant to p,
which is semi-resonant to t, which is resonant to r, but also the
inverted path r -&gt; x -&gt; v -&gt; g. The complexity and ambiguity of
the relationship is too much for immediate comprehension, as is the
case, for example for r and t.</p>
<h3 id="value">Value</h3>
<p><em>wip</em></p>
<h2 id="polytriadic-structure">Polytriadic Structure</h2>
<p><em>wip</em></p>
<h1 id="appendix">Appendix</h1>
<h2 id="models-of-the-hyperbolic-plane">Models of the Hyperbolic
plane</h2>
<h3 id="poincaré-disk">Poincaré Disk</h3>
<p>Parametrized by complex <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w" alt="w"
title="w" class="math inline" /> in the unit disk <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%7Cw%7C%3C1"
alt="|w|&lt;1" title="|w|&lt;1" class="math inline" />. This is a
conformal model. The conformal boundary <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%7Cw%7C%3D1"
alt="|w|=1" title="|w|=1" class="math inline" /> is composed of all
ideal points.</p>
<p>The representation of geometric objects are as such: - Lines:
generalized circular arcs which meet the boundary at right angles. -
Circles: Euclidean circles contained entirely within the disk. -
Horocycles: Euclidean circles tangent to the boundary. - Hypercycles:
generalized circular arcs that meet the boundary at non-right
angles.</p>
<p>Angles are accurately represented.</p>
<p>The metric is</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20ds%5E2%20%3D%20%5Cfrac%7B4%7Cdw%7C%5E2%7D%7B%281-%7Cw%7C%5E2%29%5E2%7D"
alt="ds^2 = \frac{4|dw|^2}{(1-|w|^2)^2}"
title="ds^2 = \frac{4|dw|^2}{(1-|w|^2)^2}" class="math inline" /></p>
<p>Isometries are given by Moebius transformations in <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20PSU%281%2C1%29"
alt="PSU(1,1)" title="PSU(1,1)" class="math inline" />, so of the
form</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cbegin%7Bbmatrix%7D%20u%20%26%20v%20%5C%5C%20%5Coverline%7Bv%7D%20%26%20%5Coverline%7Bu%7D%20%5Cend%7Bbmatrix%7D"
alt="\begin{bmatrix} u &amp; v \\ \overline{v} &amp; \overline{u} \end{bmatrix}"
title="\begin{bmatrix} u &amp; v \\ \overline{v} &amp; \overline{u} \end{bmatrix}"
class="math display" /></p>
<p>where <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%7Cu%7C%5E2-%7Cv%7C%5E2%20%3D%201"
alt="|u|^2-|v|^2 = 1" title="|u|^2-|v|^2 = 1" class="math inline" />.
This is actually a double cover, so it’s necessary to quotient by the
centre <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5C%7B-1%2C1%5C%7D"
alt="\{-1,1\}" title="\{-1,1\}" class="math inline" />. It can
equivalently be described as the unit split-quaternion <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20q%20%3D%20u%20%2B%20v%20j"
alt="q = u + v j" title="q = u + v j" class="math inline" /> where <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20i%5E2%20%3D%20-1"
alt="i^2 = -1" title="i^2 = -1" class="math inline" />, <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20j%5E2%3D1"
alt="j^2=1" title="j^2=1" class="math inline" />, <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20ij%20%3D%20-ji"
alt="ij = -ji" title="ij = -ji" class="math inline" />, and the
split-quaternion norm is <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20N%28q%29%20%3D%20%7Cu%7C%5E2-%7Cv%7C%5E2"
alt="N(q) = |u|^2-|v|^2" title="N(q) = |u|^2-|v|^2"
class="math inline" />.</p>
<h3 id="poincaré-half-plane">Poincaré Half-Plane</h3>
<p>Parametrized by complex <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20z%20%3D%20x%2Biy"
alt="z = x+iy" title="z = x+iy" class="math inline" /> with <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20y%20%3D%20%5CIm%7Bz%7D%20%3E%200"
alt="y = \Im{z} &gt; 0" title="y = \Im{z} &gt; 0"
class="math inline" />. This is a conformal model. The conformal
boundary is given by the real axis <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20%5CIm%7Bz%7D%20%3D%200"
alt="\Im{z} = 0" title="\Im{z} = 0" class="math inline" /> compactified
with the one point <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20z%3D%5Cinfty"
alt="z=\infty" title="z=\infty" class="math inline" />.</p>
<p>The representation of geometric objects are as such: - Lines:
generalized circular arcs which meet the boundary at right angles.
(Including vertical lines which are understood to meet <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20z%3D%5Cinfty"
alt="z=\infty" title="z=\infty" class="math inline" /> at 90°) -
Circles: Euclidean circles contained entirely within the disk. -
Horocycles: Euclidean circles tangent to the boundary. (Including
horizontal lines) - Hypercycles: generalized circular arcs that meet the
boundary at non-right angles. (Including any lines not horizontal nor
vertical)</p>
<p>The metric is</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20ds%5E2%20%3D%20%5Cfrac%7B%7Cdz%7C%5E2%7D%7B%28%5CIm%20z%29%5E2%7D%20%3D%20%5Cfrac%7Bdx%5E2%2Bdy%5E2%7D%7By%5E2%7D"
alt="ds^2 = \frac{|dz|^2}{(\Im z)^2} = \frac{dx^2+dy^2}{y^2}"
title="ds^2 = \frac{|dz|^2}{(\Im z)^2} = \frac{dx^2+dy^2}{y^2}"
class="math display" /></p>
<p>Isometries are given by real Moebius transformations in <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20PSL%282%2C%5Cmathbb%7BR%7D%29"
alt="PSL(2,\mathbb{R})" title="PSL(2,\mathbb{R})"
class="math inline" />, so of the form</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Cbegin%7Bbmatrix%7D%20a%20%26%20b%20%5C%5C%20c%20%26%20d%20%5Cend%7Bbmatrix%7D"
alt="\begin{bmatrix} a &amp; b \\ c &amp; d \end{bmatrix}"
title="\begin{bmatrix} a &amp; b \\ c &amp; d \end{bmatrix}"
class="math display" /></p>
<p>where <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20a%2Cb%2Cc%2Cd"
alt="a,b,c,d" title="a,b,c,d" class="math inline" /> are real and <img
style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20ad-bc%3D1"
alt="ad-bc=1" title="ad-bc=1" class="math inline" />, again with
quotient of the overall sign.</p>
<h3 id="conversions">Conversions</h3>
<h4 id="equidistand-azimuthal-and-poincaré-disk">Equidistand Azimuthal
and Poincaré Disk</h4>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20%5Crho%20%3D%202%20%5Ctanh%5E%7B-1%7D%7Cw%7C"
alt="\rho = 2 \tanh^{-1}|w|" title="\rho = 2 \tanh^{-1}|w|"
class="math display" /></p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w%20%3D%20%5Ctanh%28%5Crho%2F2%29%20e%5E%7Bi%5Ctheta%7D"
alt="w = \tanh(\rho/2) e^{i\theta}"
title="w = \tanh(\rho/2) e^{i\theta}" class="math display" /></p>
<h4 id="poincaré-disk-and-half-plane">Poincaré Disk and Half-Plane</h4>
<p>Also known as the Riemann Sphere’s Cayley transform.</p>
<p>This is assuming the convention of <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w%20%3D%201%20%5Crightarrow%20z%20%3D%20%5Cinfty"
alt="w = 1 \rightarrow z = \infty" title="w = 1 \rightarrow z = \infty"
class="math inline" />, <img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Ctextstyle%20w%20%3D%20-1%20%5Crightarrow%20z%20%3D%200"
alt="w = -1 \rightarrow z = 0" title="w = -1 \rightarrow z = 0"
class="math inline" />.</p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20z%20%3D%20-i%20%5Cfrac%7Bw%2B1%7D%7Bw-1%7D"
alt="z = -i \frac{w+1}{w-1}" title="z = -i \frac{w+1}{w-1}"
class="math display" /></p>
<p><img style="vertical-align:middle"
src="https://latex.codecogs.com/png.latex?%5Cdisplaystyle%20w%20%3D%20%5Cfrac%7Bz-i%7D%7Bz%2Bi%7D"
alt="w = \frac{z-i}{z+i}" title="w = \frac{z-i}{z+i}"
class="math display" /></p>
</body>
</html>
